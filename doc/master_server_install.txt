Please see http://freenac.net/en/community?q=en/installguide

Freenac
  Start by downloading the latest stable release nac tarball from FreeNac.net,
  copying to /opt, and extracting it into /opt/nac.
  Or, checking out directly from Subversion.
 

Populate tables
===============
Then, you need to populate the following tables. Since v2.2 the DB schema is more normalised, so 
you need to be much more careful: indices are used everywhere. Its recommended that you read
the Schema documentation first.

The easiest was to do the following is from the Windows GUI.

A. switches : at the beginning, you just need to insert your test switch(es) :
	# V2.1:
	INSERT INTO switch(ip,name,location) VALUES ('192.168.123.11','switch11','5th floor');
	# TBD: V2.2

B. ports : this is optional as it will be populated once new machine are connecting.
   However, it is interesting to pre-populate the field to ease the transition. By setting the "default_vlan" field to the actual vlan configured on this port, you can get the new (unknown) hosts on the same vlan (see config.inc).
	# V2.1:
	INSERT INTO port(switch,name,location,default_vlan) VALUES ('192.168.254.11','Fa/0/2','5 B','123');
	# TBD: V2.2	

C. users : this contains all your users. It is probably better to regularly update this table by pulling data from a directory (ActiveDirectory: see optional modules below)
	# V2.1:
	INSERT INTO users(Username,Surname,GivenName,rfc822mailbox,HouseIdentifier,PhysicalDeliveryOfficeName,Mobile) VALUES ("username","Jean","Doe","jean.doe@foo.ch","Building B","5 B2","0797704803);
	# TBD: V2.2
	
D. The vlan table is a list for vlans, number, descritions.
   The vlan index is used to refer to a vlan from the systems table.
   
E. Optionally: The Operating System, Classifciation, Building, Location tables.



config.inc:
===========
Create a config.inc from a template and set especially the DB connection parameters:
  cp /opt/nac/etc/config.inc.template /opt/nac/etc/config.inc
  vi /opt/nac/etc/config.inc


At this stage The DB should be working and PHP should be able to access the DB, and the
messages logged through syslog to '/var/log/messages'.




Starting the NAC daemons:
=========================
Start the vmps daemon, by creating a startup file and starting the service:

  cp /opt/nac/contrib/startup_init.d/vmps /etc/init.d/vmps
  ln -s /etc/init.d/vmps /usr/sbin/rcvmps
  chmod 750 /etc/init.d/vmps
  chkconfig vmps on
  vi /etc/init.d/vmps       [adapt IP address on vmpsd start line]
   
  Start and watch syslog for events:
  rcvmps start
  tail -f /var/log/messages
  

Start the vmps_lastseen daemon, by creating a startup file and starting the service:

  cp /opt/nac/contrib/startup_init.d/vmps_lastseen /etc/init.d/vmps_lastseen
  ln -s /etc/init.d/vmps_lastseen /usr/sbin/rcvmps_lastseen
  chmod 750 /etc/init.d/vmps_lastseen
  chkconfig vmps_lastseen on
  
  Start and watch syslog for events:
  rcvmps_lastseen start
  tail -f /var/log/messages


Test purging of old unknown device entries in the system table (and watch syslog):
  /opt/nac/bin/purge_unknowns 
  
Then enable this in the root in cron:
0   1   26 * *   /opt/nac/bin/purge_unknowns  
